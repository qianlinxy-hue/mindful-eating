<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ­£å¿µä¸€å£ | Mindful Bite</title>
    <style>
        :root {
            --fresh-pink: #FFC3E6;
            --fresh-blue: #B8E4FF;
            --fresh-yellow: #FFF5C2;
            --fresh-mint: #C1E7D3;
            --fresh-purple: #E0C3FC;
            --text-dark: #5A5A5A;
            --glass-bg: rgba(255, 255, 255, 0.65);
            --glass-border: rgba(255, 255, 255, 0.8);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            color: var(--text-dark);
            background: linear-gradient(45deg, var(--fresh-pink), var(--fresh-yellow), var(--fresh-blue), var(--fresh-purple));
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            width: 85%;
            max-width: 380px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px); 
            -webkit-backdrop-filter: blur(20px);
            border-radius: 35px;
            padding: 40px 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05), inset 0 0 0 2px var(--glass-border);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1 {
            font-weight: 600;
            font-size: 1.8rem;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .step-indicator {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--fresh-purple);
            letter-spacing: 2px;
            margin-bottom: 25px;
            text-transform: uppercase;
            display: inline-block;
            background: rgba(255, 255, 255, 0.5);
            padding: 5px 15px;
            border-radius: 20px;
        }

        .content-box {
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .emoji {
            font-size: 4.5rem;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1));
        }

        p {
            font-size: 1.15rem;
            line-height: 1.7;
            margin: 0;
            font-weight: 400;
        }

        .timer-display {
            font-size: 4rem;
            font-weight: 700;
            color: var(--fresh-blue);
            margin: 10px 0;
            text-shadow: 2px 2px 10px rgba(184, 228, 255, 0.8);
            display: none;
        }

        .btn {
            margin-top: 35px;
            background: linear-gradient(135deg, var(--fresh-blue), var(--fresh-purple));
            color: white;
            border: none;
            padding: 16px 45px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 10px 20px -5px rgba(184, 228, 255, 0.6);
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 25px -5px rgba(184, 228, 255, 0.7);
        }
        
        .btn:active { transform: scale(0.98); }
        .btn:disabled {
            background: #E0E0E0;
            color: #A0A0A0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .progress-container {
            width: 80%;
            height: 6px;
            background-color: rgba(255,255,255,0.5);
            border-radius: 10px;
            margin-top: 30px;
            overflow: hidden;
            margin-left: auto;
            margin-right: auto;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, var(--fresh-mint), var(--fresh-blue));
            transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 10px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-12px); }
        }
        .fade-in { animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="app"></div>
    </div>

    <script>
        // éŸ³æ•ˆæ•°æ®
        const popSoundBase64 = "data:audio/mpeg;base64,//NkxAAACCABAAAD//NkxAgACCABAAAD//NkxAwACCABAAAD//NkxBAACCABAAAD//NkxBQACCABAAAD//NkxBgACCABAAAD//NkxBwACCABAAAD//NkxCAACCABAAAD//NkxCQACCABAAAD//NkxCgACCABAAAD//NkxCwACCABAAAD//NkxDAACCABAAAD//NkxDQACCABAAAD//NkxDgACCABAAAD//NkxDwACCABAAAD//NkxEAACCABAAAD//NkxEQACCABAAAD//NkxEgACCABAAAD//NkxEwACCABAAAD//NkxFAACCABAAAD//NkxFQACCABAAAD//NkxGAACCABAAAD/6jEAAgQAsAAA//zZMQcAAggAQAAA//zZMQgAAggAQAAA//zZMQkAAggAQAAA//zZMQoAAggAQAAA//zZMQsAAggAQAAA//zZMQwAAggAQAAA//zZMQ0AAggAQAAA//zZMQ4AAggAQAAA//zZMQ8AAggAQAAA//zZMQAAAgAQAAD//NkxAQACCABAAAD//NkxAgACCABAAAD//NkxAwACCABAAAD//NkxBAACCABAAAD//NkxBQACCABAAAD//NkxBgACCABAAAD//NkxBwACCABAAAD//NkxCAACCABAAAD//NkxCQACCABAAAD//NkxCgACCABAAAD//NkxCwACCABAAAD//NkxDAACCABAAAD//NkxDQACCABAAAD//NkxDgACCABAAAD//NkxDwACCABAAAD//NkxEAACCABAAAD//NkxEQACCABAAAD//NkxEgACCABAAAD//NkxEwACCABAAAD//NkxFAACCABAAAD//NkxFQACCABAAAD//NkxFgACCABAAAD//NkxGAACCABAAAD/6jEAAgQAsAAA//zZMQcAAggAQAAA//zZMQgAAggAQAAA//zZMQkAAggAQAAA//zZMQoAAggAQAAA//zZMQsAAggAQAAA//zZMQwAAggAQAAA//zZMQ0AAggAQAAA//zZMQ4AAggAQAAA//zZMQ8AAggAQAAA//zZMQAAAgAQAAD//NkxAQACCABAAAD//NkxAgACCABAAAD//NkxAwACCABAAAD//NkxBAACCABAAAD//NkxBQACCABAAAD//NkxBgACCABAAAD//NkxBwACCABAAAD//NkxCAACCABAAAD//NkxCQACCABAAAD//NkxCgACCABAAAD//NkxCwACCABAAAD//NkxDAACCABAAAD//NkxDQACCABAAAD//NkxDgACCABAAAD//NkxDwACCABAAAD//NkxEAACCABAAAD//NkxEQACCABAAAD//NkxEgACCABAAAD//NkxEwACCABAAAD//NkxFAACCABAAAD//NkxFQACCABAAAD//NkxFgACCABAAAD//NkxFwACCABAAAD//NkxGAACCABAAAD/6jEAAgQAsAAA//zZMQcAAggAQAAA//zZMQgAAggAQAAA//zZMQkAAggAQAAA//zZMQoAAggAQAAA//zZMQsAAggAQAAA//zZMQwAAggAQAAA//zZMQ0AAggAQAAA//zZMQ4AAggAQAAA//zZMQ8AAggAQAAA";
        const audio = new Audio(popSoundBase64);
        audio.volume = 0.4;

        function playClickSound() {
            audio.currentTime = 0; 
            const playPromise = audio.play();
            if (playPromise !== undefined) playPromise.catch(() => {});
        }

        const steps = [
            { step: "Ready", emoji: "ğŸ§˜â€â™€ï¸", title: "å‡†å¤‡å¥½äº†å—ï¼Ÿ", text: "å˜¿ï¼Œåˆ«æ€¥ç€åƒã€‚<br>è®©æˆ‘ä»¬èŠ±3åˆ†é’Ÿï¼Œç»™å¤§è„‘å’Œèƒƒä¸€ç‚¹è¿æ¥çš„æ—¶é—´ã€‚<br>å‡†å¤‡å¥½ä½ é¢å‰çš„é‚£ä¸€å£é£Ÿç‰©ã€‚", btn: "å¼€å§‹æ­£å¿µä¹‹æ—…" },
            { step: "Step 1: è§‚å¯Ÿ", emoji: "âœ¨", title: "ç”¨çœ¼ç›â€œåƒâ€ç¬¬ä¸€å£", text: "ä»”ç»†çœ‹çœ‹å®ƒã€‚å®ƒçš„é¢œè‰²æ˜¯æ€æ ·çš„ï¼Ÿ<br>å®ƒçš„çº¹ç†æ˜¯ç²—ç³™è¿˜æ˜¯å…‰æ»‘çš„ï¼Ÿ<br>æƒ³è±¡ä½ æ­£åœ¨ç»™å®ƒæ‹ä¸€å¼ ç‰¹å†™ç…§ç‰‡ã€‚", btn: "è§‚å¯Ÿå¥½äº†" },
            { step: "Step 2: å—…é—»", emoji: "ğŸŒ¸", title: "å”¤é†’å—…è§‰", text: "å‡‘è¿‘é—»ä¸€é—»ã€‚<br>é¦™æ°”æ˜¯æµ“éƒçš„è¿˜æ˜¯æ¸…æ·¡çš„ï¼Ÿ<br>è¿™è‚¡å‘³é“è®©ä½ æƒ³èµ·äº†ä»€ä¹ˆï¼Ÿ", btn: "é—»åˆ°äº†" },
            { step: "Step 3: å…¥å£", emoji: "ğŸ‘„", title: "å”‡é½¿é—´çš„è§¦ç¢°", text: "è½»è½»æ”¾è¿›å˜´é‡Œï¼Œ<b>åœä½ï¼ä¸è¦åš¼ã€‚</b><br>ç”¨èˆŒå¤´æ„Ÿå—å®ƒçš„æ¸©åº¦ã€é‡é‡ã€‚<br>æ˜¯è½¯ç³¯ï¼Œé…¥è„†ï¼Œè¿˜æ˜¯ä¸æ»‘ï¼Ÿ", btn: "æ„Ÿå—åˆ°äº†" },
            { 
                step: "Step 4: å’€åš¼", 
                emoji: "â³", 
                title: "æ…¢åŠ¨ä½œå’€åš¼", 
                text: "ç°åœ¨ï¼Œå¼€å§‹éå¸¸ç¼“æ…¢åœ°å’€åš¼ã€‚<br>æ„Ÿå—é£Ÿç‰©è´¨åœ°å’Œå‘³é“åœ¨å£ä¸­çš„å˜åŒ–ã€‚<br>è¯·åšæŒå’€åš¼åˆ°å€’è®¡æ—¶ç»“æŸã€‚", 
                btn: "å‡†å¤‡å¼€å§‹å’€åš¼", 
                hasTimer: true, 
                timerDuration: 20 
            },
            { step: "Step 5: åå’½", emoji: "ğŸ˜Œ", title: "æ„Ÿæ©ä¸æ»¡è¶³", text: "æ„Ÿå—é£Ÿç‰©é¡ºç€å–‰å’™æ»‘ä¸‹çš„è¿‡ç¨‹ã€‚<br>æ„Ÿå—èƒƒéƒ¨æ¥æ”¶åˆ°èƒ½é‡çš„å¾®å°æ»¡è¶³æ„Ÿã€‚<br>è°¢è°¢è¿™ä¸€å£é£Ÿç‰©ã€‚", btn: "å®Œæˆè¿™ä¸€å£" },
            { step: "Done", emoji: "ğŸ‰", title: "å¤ªæ£’äº†ï¼", text: "ä½ åˆšåˆšè¿›è¡Œäº†ä¸€æ¬¡å®Œç¾çš„æ­£å¿µé¥®é£Ÿä½“éªŒã€‚<br>æ˜¯ä¸æ˜¯æ„Ÿè§‰å‘³é“æ›´ä¸°å¯Œäº†ï¼Ÿ<br>ä¿æŒè¿™ä»½è§‰çŸ¥ï¼Œäº«å—ä¸‹ä¸€å£å§ã€‚", btn: "å†ä½“éªŒä¸€æ¬¡" }
        ];

        let currentStep = 0;
        let timerInterval = null;
        let isStepTimerDone = false; // æ–°å¢ï¼šæ ‡è®°å½“å‰æ­¥éª¤çš„è®¡æ—¶å™¨æ˜¯å¦å·²å®Œæˆ
        const app = document.getElementById('app');

        function render() {
            const data = steps[currentStep];
            const progress = (currentStep / (steps.length - 1)) * 100;
            const isLastStep = currentStep === steps.length - 1;
            
            app.innerHTML = `
                <div class="content-box fade-in">
                    ${currentStep > 0 && !isLastStep ? `<div class="step-indicator">${data.step}</div>` : ''}
                    <h1>${data.title}</h1>
                    <div class="emoji">${data.emoji}</div>
                    ${data.hasTimer ? `<div class="timer-display" id="timerNum">${data.timerDuration}</div>` : ''}
                    <p>${data.text}</p>
                    <button class="btn" id="actionBtn">${data.btn}</button>
                    ${currentStep > 0 ? `<div class="progress-container"><div class="progress-bar" style="width: ${progress}%"></div></div>` : ''}
                </div>
            `;

            const btnElement = document.getElementById('actionBtn');
            
            btnElement.onclick = () => {
                playClickSound();

                // æ ¸å¿ƒä¿®å¤é€»è¾‘ï¼š
                // å¦‚æœéœ€è¦è®¡æ—¶ï¼Œä¸”ã€è¿˜æ²¡æœ‰å®Œæˆè®¡æ—¶ã€‘ï¼Œåˆ™å¼€å§‹è®¡æ—¶
                if (data.hasTimer && !isStepTimerDone) {
                    startTimer(data.timerDuration, btnElement);
                } else {
                    // å¦‚æœä¸éœ€è¦è®¡æ—¶ï¼Œæˆ–è€…ã€è®¡æ—¶å·²ç»å®Œæˆäº†ã€‘ï¼Œåˆ™è·³è½¬ä¸‹ä¸€æ­¥
                    nextStep();
                }
            };
        }

        function startTimer(duration, btnElement) {
            let timeLeft = duration;
            const timerDisplay = document.getElementById('timerNum');
            
            timerDisplay.style.display = "block";
            btnElement.disabled = true;
            btnElement.innerText = `è¯·ä¿æŒå’€åš¼...`;

            if (timerInterval) clearInterval(timerInterval);

            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.innerText = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    timerDisplay.style.display = "none";
                    
                    // è®¡æ—¶ç»“æŸï¼Œæ ‡è®°å®ŒæˆçŠ¶æ€
                    isStepTimerDone = true; 
                    
                    btnElement.disabled = false;
                    btnElement.innerText = "å’€åš¼å®Œæˆï¼ˆç‚¹å‡»ç»§ç»­ï¼‰"; // æ˜ç¡®æç¤ºå¯ä»¥ç»§ç»­äº†
                    btnElement.style.background = "linear-gradient(135deg, #FFC3E6, #E0C3FC)"; // ç¨å¾®å˜è‰²æç¤ºçŠ¶æ€å˜æ›´
                    playClickSound();
                }
            }, 1000);
        }

        function nextStep() {
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = null;
            
            // é‡ç½®è®¡æ—¶å™¨å®ŒæˆçŠ¶æ€ï¼Œä¾›ä¸‹ä¸€ä¸ªæ­¥éª¤ï¼ˆå¦‚æœæœ‰ï¼‰ä½¿ç”¨
            isStepTimerDone = false; 
            
            currentStep++;
            if (currentStep >= steps.length) {
                currentStep = 0;
            }
            render();
        }

        render();
        
        document.addEventListener('click', function initAudio() {
            audio.load();
            document.removeEventListener('click', initAudio);
        }, {once: true});
    </script>
</body>
</html>